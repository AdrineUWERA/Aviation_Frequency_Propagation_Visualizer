<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GGV receiver's coverage</title>
    <style>
        #map{
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>GOOGLE MAP</h1>
    <div id="map"></div>
    <script>
        function initMap() {
            // map options
            var options = {
                zoom: 10,
                center:{lat:-1.9437057, lng: 29.8805778 }
            };

            // new map object
            var map = new google.maps.Map(document.getElementById('map'), options);

            // listen for a click on anywhere on the map

            google.maps.event.addListener(map, 'click', function(e) {
                addMarker({location: e.latLng});
            });

            // var marker = new google.maps.Marker({
            //     position: {lat:-1.9500, lng: 30.0589 },
            //     map: map
            //     // icon: 'map'
            // });

            // var infoWindow = new google.maps.InfoWindow({
            //     content: "Kigali, Rwanda"
            // });

            // marker.addListener('click', function() {
            //     infoWindow.open(map, marker)
            // });


            function addMarker(props) {
                var marker = new google.maps.Marker({
                    position: props.location,
                    map: map,
                });

                if (props.iconImg){
                    marker.setIcon(props.iconImg);
                };

                if (props.content) {
                    var infoWindow = new google.maps.InfoWindow({
                        content: props.content
                    });

                    marker.addListener('click', function() {
                        infoWindow.open(map, marker)
                    });
                }
                
            };

            var markersList = [
                {
                    location:{lat:-1.9500, lng: 30.0589 },
                    content: 'Kigali'
                },

                {
                    location:{lat:-2.008570, lng: 30.135835},
                    iconImg: 'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',
                    content: 'Kicukiro'
                }

            ];
            
            for (var i = 0; i< markersList.length; i++) {
                addMarker(markersList[i]);
            }
            
        }
    </script>
    <script async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAlWnvLoFl72OeO3FpOkFBObwN5Vr6EkZA &callback=initMap">
    </script>
</body>
</html>